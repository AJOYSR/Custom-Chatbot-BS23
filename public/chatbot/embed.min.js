(function () {
  const version = '1.0.0';
  const BS23Chat = {
    init: function (config) {
      console.log('ðŸš€ ~ config:', config);
      if (!config || !config.botId) {
        console.error('BS23Chat: botId is required');
        return;
      }
      const finalConfig = Object.assign(
        {
          buttonColor: '#578FCA',
          position: 'right',
          version: version,
          icon: config.icon,
        },
        config,
      );
      const script = document.createElement('script');
      script.src = `${config.serverUrl || 'http://localhost:4040'}/public/chatbot/core.min.js?v=${version}`;
      script.onload = () => {
        if (window._BS23Core)
          setTimeout(() => window._BS23Core.init(finalConfig), 0);
      };
      script.onerror = () => {
        console.error('Failed to load chat widget');
      };
      document.head.appendChild(script);
    },
  };
  window.BS23Chat = BS23Chat;
})();
